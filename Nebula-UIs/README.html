<h1 id="overview">Overview</h1>
<p>This project contains all the web clients available for the Nebula project. The current clients are:</p>
<h2 id="cosmosd3.html">CosmosD3.html</h2>
<p>The base client that uses the CosmosMDS.js script. It implements a layout for documents and provides a panel for further information about those documents. Text queries can be used to bring in initial data, and then OLI updates and interactions with the information panel can further refine the set of documents displayed.</p>
<h2 id="cosmosradar.html">CosmosRadar.html</h2>
<p>A modification to the previous client so that document location is mapped in only one dimension, an angular component, and the document relevance is mapped to the other dimension, the radial component.</p>
<h2 id="cosmostwitter.html">CosmosTwitter.html</h2>
<p>Similar to the original client, but it loads the <code>twitter</code> pipeline, and automatically sets the label of a point to the full tweet contents. The access and consumer tokens must be set in the <code>twitter</code> pipeline for this to function properly.</p>
<h2 id="photon.html">Photon.html</h2>
<p>A 3D version of the base CosmosD3 visualization. Functionality is nearly the same, but points are in 3 dimensions.</p>
<h1 id="creating-a-new-client">Creating a New Client</h1>
<p>Here we describe all the necessary pieces to create a new client and communicate with the server and pipeline.</p>
<p>All communication with the server is done through a WebSocket connection. This connection is created by first including the socket client script by including the following within the page:</p>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;/socket.io/socket.io.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></code></pre></div>
<p>Then a connection can be initiated in your Javascript by calling:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> socket <span class="op">=</span> <span class="va">io</span>.<span class="at">connect</span>()<span class="op">;</span><span class="vs">``</span></code></pre></div>
<p>You must then create callbacks for each of the four types of messages you want to include. These messages are typically sent in response to a request made by the client. The purpose of these messages are explained in the Nebula and Nebula-Pipeline documentation.</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">socket</span>.<span class="at">on</span>(<span class="st">&#39;action&#39;</span><span class="op">,</span> <span class="kw">function</span>(data) <span class="op">{</span>...<span class="op">}</span>)<span class="op">;</span>
<span class="va">socket</span>.<span class="at">on</span>(<span class="st">&#39;update&#39;</span><span class="op">,</span> <span class="kw">function</span>(data) <span class="op">{</span>...<span class="op">}</span>)<span class="op">;</span>
<span class="va">socket</span>.<span class="at">on</span>(<span class="st">&#39;get&#39;</span><span class="op">,</span> <span class="kw">function</span>(data) <span class="op">{</span>...<span class="op">}</span>)<span class="op">;</span>
<span class="va">socket</span>.<span class="at">on</span>(<span class="st">&#39;reset&#39;</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span>...<span class="op">}</span>)<span class="op">;</span></code></pre></div>
<p>Once these callbacks are in place, you must tell the server that you want to join and room. This is done by emiting the <code>join</code> message, which includes the name of the room you wish to join (for now always 'default'), your user ID (typically the ID of the socket for now), the pipeline you want to run, and any arguments for that pipeline. For example, to create or join a room using the <code>cosmos</code> pipeline, you would call</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">socket</span>.<span class="at">emit</span>(<span class="st">&#39;join&#39;</span><span class="op">,</span> <span class="st">&#39;default&#39;</span><span class="op">,</span> <span class="va">socket</span>.<span class="at">id</span><span class="op">,</span> <span class="st">&#39;cosmos&#39;</span>)<span class="op">;</span></code></pre></div>
<p>If you created a 3D client and wanted the <code>cosmos</code> pipeline to output positions in 3D, you can indicate that by:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">socket</span>.<span class="at">emit</span>(<span class="st">&#39;join&#39;</span><span class="op">,</span> <span class="st">&#39;default&#39;</span><span class="op">,</span> <span class="va">socket</span>.<span class="at">id</span><span class="op">,</span> <span class="st">&#39;cosmos&#39;</span><span class="op">,</span> <span class="op">{</span><span class="st">&#39;low_dimensions&#39;</span><span class="op">:</span> <span class="dv">3</span><span class="op">}</span>)<span class="op">;</span></code></pre></div>
<p>The arguments available are dependent on the pipeline you are running.</p>
<p>Once this is done, you can update other clients open in the same room using <code>action</code> messages, initiate an iteration of the pipeline based on an interaction using the <code>update</code> message, request data directly from the data controller using the <code>get</code> message, or reset the pipeline using the <code>reset</code> message. Each of these are done using the same <code>emit</code> function. For example, initiating a text query in the <code>cosmos</code> pipeline would be done by calling</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">socket</span>.<span class="at">emit</span>(<span class="st">&#39;update&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">type</span><span class="op">:</span> <span class="st">&quot;search&quot;</span><span class="op">,</span> <span class="dt">query</span><span class="op">:</span> <span class="op">&lt;</span>search query<span class="op">&gt;}</span>)<span class="op">;</span></code></pre></div>
